{"ast":null,"code":"const express = require(\"express\");\nconst cors = require(\"cors\");\nconst bodyParser = require(\"body-parser\");\nconst twilio = require(\"twilio\");\nrequire(\"dotenv\").config();\nconst app = express();\napp.use(cors());\napp.use(bodyParser.json());\n\n// Get Twilio credentials securely from .env\nconst accountSid = process.env.TWILIO_ACCOUNT_SID;\nconst authToken = process.env.TWILIO_AUTH_TOKEN;\nconst twilioPhone = process.env.TWILIO_PHONE_NUMBER;\nconst twilioClient = twilio(accountSid, authToken);\nconst otpStore = {}; // Warning: For learning/demo only, do NOT use in production\n\n// Send OTP endpoint\napp.post(\"/api/send-otp\", async (req, res) => {\n  console.log(\"POST /api/send-otp hit\"); // DEBUG LOG\n\n  const {\n    phone\n  } = req.body;\n  if (!phone) {\n    return res.status(400).send({\n      success: false,\n      message: \"Phone number required\"\n    });\n  }\n  const otp = Math.floor(100000 + Math.random() * 900000).toString();\n  otpStore[phone] = otp;\n  try {\n    await twilioClient.messages.create({\n      body: `Your OTP is ${otp}`,\n      from: twilioPhone,\n      to: phone\n    });\n    res.status(200).send({\n      success: true,\n      message: \"OTP sent\"\n    });\n  } catch (error) {\n    res.status(500).send({\n      success: false,\n      error: error.message\n    });\n  }\n});\n\n// Verify OTP endpoint\napp.post(\"/api/verify-otp\", (req, res) => {\n  console.log(\"POST /api/verify-otp hit\"); // DEBUG LOG\n\n  const {\n    phone,\n    otp\n  } = req.body;\n  if (!phone || !otp) {\n    return res.status(400).send({\n      success: false,\n      message: \"Phone and OTP required\"\n    });\n  }\n  if (otpStore[phone] === otp) {\n    delete otpStore[phone];\n    res.status(200).send({\n      success: true,\n      message: \"OTP verified\"\n    });\n  } else {\n    res.status(401).send({\n      success: false,\n      message: \"Invalid OTP\"\n    });\n  }\n});\nconst PORT = process.env.PORT || 5000;\napp.listen(PORT, () => console.log(`Server running on port ${PORT}`));","map":{"version":3,"names":["express","require","cors","bodyParser","twilio","config","app","use","json","accountSid","process","env","TWILIO_ACCOUNT_SID","authToken","TWILIO_AUTH_TOKEN","twilioPhone","TWILIO_PHONE_NUMBER","twilioClient","otpStore","post","req","res","console","log","phone","body","status","send","success","message","otp","Math","floor","random","toString","messages","create","from","to","error","PORT","listen"],"sources":["C:/Users/youme/OneDrive/Desktop/fuelnow/frontend/src/index.js"],"sourcesContent":["const express = require(\"express\");\r\nconst cors = require(\"cors\");\r\nconst bodyParser = require(\"body-parser\");\r\nconst twilio = require(\"twilio\");\r\n\r\nrequire(\"dotenv\").config();\r\nconst app = express();\r\n\r\napp.use(cors());\r\napp.use(bodyParser.json());\r\n\r\n// Get Twilio credentials securely from .env\r\nconst accountSid = process.env.TWILIO_ACCOUNT_SID;\r\nconst authToken = process.env.TWILIO_AUTH_TOKEN;\r\nconst twilioPhone = process.env.TWILIO_PHONE_NUMBER;\r\nconst twilioClient = twilio(accountSid, authToken);\r\n\r\nconst otpStore = {}; // Warning: For learning/demo only, do NOT use in production\r\n\r\n// Send OTP endpoint\r\napp.post(\"/api/send-otp\", async (req, res) => {\r\n  console.log(\"POST /api/send-otp hit\"); // DEBUG LOG\r\n\r\n  const { phone } = req.body;\r\n  if (!phone) {\r\n    return res.status(400).send({ success: false, message: \"Phone number required\" });\r\n  }\r\n  const otp = Math.floor(100000 + Math.random() * 900000).toString();\r\n  otpStore[phone] = otp;\r\n  try {\r\n    await twilioClient.messages.create({\r\n      body: `Your OTP is ${otp}`,\r\n      from: twilioPhone,\r\n      to: phone\r\n    });\r\n    res.status(200).send({ success: true, message: \"OTP sent\" });\r\n  } catch (error) {\r\n    res.status(500).send({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n// Verify OTP endpoint\r\napp.post(\"/api/verify-otp\", (req, res) => {\r\n  console.log(\"POST /api/verify-otp hit\"); // DEBUG LOG\r\n\r\n  const { phone, otp } = req.body;\r\n  if (!phone || !otp) {\r\n    return res.status(400).send({ success: false, message: \"Phone and OTP required\" });\r\n  }\r\n  if (otpStore[phone] === otp) {\r\n    delete otpStore[phone];\r\n    res.status(200).send({ success: true, message: \"OTP verified\" });\r\n  } else {\r\n    res.status(401).send({ success: false, message: \"Invalid OTP\" });\r\n  }\r\n});\r\n\r\nconst PORT = process.env.PORT || 5000;\r\napp.listen(PORT, () => console.log(`Server running on port ${PORT}`));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}